<div class="w-full max-w-2xl mx-auto mt-8">
    <div class="flex items-center mb-8">
        <a href="/dashboard" class="link text-base-content/70 mr-4">‚Üê Dashboard</a>
        <h1 class="text-3xl font-bold text-base-content">Create Organization</h1>
    </div>
    
    <% if (locals.flash?.error) { %>
        <div class="alert alert-error mb-4">
            <%= locals.flash.error %>
        </div>
    <% } %>
    
    <% if (errors && errors.length > 0) { %>
        <div class="alert alert-error mb-4">
            <ul class="list-disc ml-4">
                <% errors.forEach(error => { %>
                    <li><%= error.message %></li>
                <% }) %>
            </ul>
        </div>
    <% } %>
    
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <form method="POST" action="/orgs">
                <div class="form-control mb-6">
                    <label for="name" class="label">
                        <span class="label-text">Organization Name</span>
                    </label>
                    <input 
                        type="text" 
                        id="name" 
                        name="name" 
                        value="<%= oldInput.name || '' %>"
                        required
                        class="input input-bordered w-full"
                        placeholder="Enter organization name"
                        oninput="generateSlug()"
                    >
                    <label class="label">
                        <span class="label-text-alt">The name of your team or organization</span>
                    </label>
                </div>
            
                <div class="form-control mb-8">
                    <label for="slug" class="label">
                        <span class="label-text">URL Slug</span>
                    </label>
                    <div class="join">
                        <span class="join-item bg-base-200 px-3 py-2 text-base-content/70">
                            localhost:3000/orgs/
                        </span>
                        <input 
                            type="text" 
                            id="slug" 
                            name="slug" 
                            value="<%= oldInput.slug || '' %>"
                            required
                            pattern="^[a-z0-9-]+$"
                            class="input input-bordered join-item flex-1"
                            placeholder="my-organization"
                        >
                    </div>
                    <label class="label">
                        <span class="label-text-alt">Only lowercase letters, numbers, and hyphens allowed</span>
                    </label>
                </div>
            
                <div class="card-actions justify-end">
                    <a href="/dashboard" class="btn btn-neutral">Cancel</a>
                    <button type="submit" class="btn btn-success">Create Organization</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function generateSlug() {
    const nameInput = document.getElementById('name');
    const slugInput = document.getElementById('slug');
    
    if (nameInput && slugInput && !slugInput.value) {
        const slug = nameInput.value
            .toLowerCase()
            .replace(/[^a-z0-9\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .replace(/^-|-$/g, '');
        slugInput.value = slug;
    }
}
</script>