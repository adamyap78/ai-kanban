<div style="max-width: 600px; margin: 2rem auto;">
    <div style="display: flex; align-items: center; margin-bottom: 2rem;">
        <a href="/dashboard" style="color: #6b7280; text-decoration: none; margin-right: 1rem;">‚Üê Dashboard</a>
        <h1 style="margin: 0; color: #1f2937;">Create Organization</h1>
    </div>
    
    <% if (locals.flash?.error) { %>
        <div style="background: #fee2e2; border: 1px solid #fecaca; color: #dc2626; padding: 0.75rem; border-radius: 0.375rem; margin-bottom: 1rem;">
            <%= locals.flash.error %>
        </div>
    <% } %>
    
    <% if (errors && errors.length > 0) { %>
        <div style="background: #fee2e2; border: 1px solid #fecaca; color: #dc2626; padding: 0.75rem; border-radius: 0.375rem; margin-bottom: 1rem;">
            <ul style="margin: 0; padding-left: 1rem;">
                <% errors.forEach(error => { %>
                    <li><%= error.message %></li>
                <% }) %>
            </ul>
        </div>
    <% } %>
    
    <div style="background: white; padding: 2rem; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <form method="POST" action="/orgs">
            <div style="margin-bottom: 1.5rem;">
                <label for="name" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Organization Name</label>
                <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    value="<%= oldInput.name || '' %>"
                    required
                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; font-size: 1rem;"
                    placeholder="Enter organization name"
                    oninput="generateSlug()"
                >
                <p style="font-size: 0.875rem; color: #6b7280; margin-top: 0.25rem;">
                    The name of your team or organization
                </p>
            </div>
            
            <div style="margin-bottom: 2rem;">
                <label for="slug" style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">URL Slug</label>
                <div style="display: flex; align-items: center; border: 1px solid #d1d5db; border-radius: 0.375rem; overflow: hidden;">
                    <span style="background: #f9fafb; padding: 0.75rem; color: #6b7280; border-right: 1px solid #d1d5db;">
                        localhost:3000/orgs/
                    </span>
                    <input 
                        type="text" 
                        id="slug" 
                        name="slug" 
                        value="<%= oldInput.slug || '' %>"
                        required
                        pattern="^[a-z0-9-]+$"
                        style="flex: 1; padding: 0.75rem; border: none; outline: none; font-size: 1rem;"
                        placeholder="my-organization"
                    >
                </div>
                <p style="font-size: 0.875rem; color: #6b7280; margin-top: 0.25rem;">
                    Only lowercase letters, numbers, and hyphens allowed
                </p>
            </div>
            
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
                <a href="/dashboard" class="btn" style="background: #6b7280;">Cancel</a>
                <button type="submit" class="btn" style="background: #059669;">Create Organization</button>
            </div>
        </form>
    </div>
</div>

<script>
function generateSlug() {
    const nameInput = document.getElementById('name');
    const slugInput = document.getElementById('slug');
    
    if (nameInput && slugInput && !slugInput.value) {
        const slug = nameInput.value
            .toLowerCase()
            .replace(/[^a-z0-9\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .replace(/^-|-$/g, '');
        slugInput.value = slug;
    }
}
</script>