<!-- Card Comments Section -->
<div class="space-y-4">
    <h3 class="text-lg font-semibold">Comments</h3>
    
    <!-- Add Comment Form -->
    <form hx-post="/cards/<%= cardId %>/comments"
          hx-target="#comments-list"
          hx-swap="afterbegin"
          hx-on::after-request="this.reset()"
          class="space-y-3">
        <div class="form-control">
            <textarea name="content" 
                      class="textarea textarea-bordered w-full h-20" 
                      placeholder="Write a comment..."
                      required
                      maxlength="2000"></textarea>
        </div>
        <button type="submit" 
                class="btn btn-primary btn-sm">
            Add Comment
        </button>
    </form>
    
    <!-- Comments List -->
    <div id="comments-list" class="space-y-3">
        <% if (comments && comments.length > 0) { %>
            <% comments.forEach(comment => { %>
                <%- include('comment-item', { comment }) %>
            <% }) %>
        <% } else { %>
            <p class="text-gray-500 text-sm italic">No comments yet. Be the first to comment!</p>
        <% } %>
    </div>
</div>